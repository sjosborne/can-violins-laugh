<!DOCTYPE html>
<html>
  <head>
    <title>Thesis experiment</title>
     <script src="https://unpkg.com/jspsych@8.2.2"></script>
    <script src="https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.1.0"></script>
    <script src="https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.1.0"></script>
    <script src="https://unpkg.com/@jspsych/plugin-preload@2.1.0"></script>
    <script src="https://unpkg.com/@jspsych/plugin-audio-keyboard-response@2.1.0"></script>
    <script src="https://unpkg.com/@jspsych/plugin-survey-text@2.1.0"></script>
    <link href="https://unpkg.com/jspsych@8.2.2/css/jspsych.css" rel="stylesheet" type="text/css" />
</head>
  <body></body>
  <script>
    const jsPsych = initJsPsych({override_safe_mode:true});
    var timeline = [];

    // capture info from Prolific

      var subject_id = jsPsych.data.getURLVariable('PROLIFIC_PID');
  var study_id = jsPsych.data.getURLVariable('STUDY_ID');
  var session_id = jsPsych.data.getURLVariable('SESSION_ID');

  jsPsych.data.addProperties({
    subject_id: subject_id,
    study_id: study_id,
    session_id: session_id
  });

  //welcome
    var welcome = {
      type: jsPsychHtmlKeyboardResponse,
      stimulus: "Welcome to the experiment. Please make sure you are wearing headphones. Press any key to begin."
    };
    timeline.push(welcome);

  //instructions
    var instructions = {
      type: jsPsychHtmlKeyboardResponse,
      stimulus: `
      <p> In this experiment, you will be asked to listen to various sounds. Some will be human vocalizations, and some will be instrumental music. </p>
      <p> After listening to each sound, please type one word in the text box describing the emotion you believe the sound was expressing. </p>
      <p> You will only hear each sound once, so listen carefully. </p>
      <p> Once you have typed out a word describing the emotion you believe was being conveyed, press the "Continue" button to move on to the next sound. </p>
      <p> Press any key to begin. </p>
      `,
      post_trial_gap: 2000
    };
    timeline.push(instructions);


  //stimuli preloading
    var preload = {
  type: jsPsychPreload,
  audio: [
    '294_ut_laugh-amused_46-m.wav'
  ]
};
timeline.push(preload);

  //audio trials UNFINISHED CODE FINISH THIS
    var audio_trials = {
        type: jsPsychAudioKeyboardResponse,
        stimulus: '294_ut_laugh-amused_46-m.wav',
        choices: "NO_KEYS",
        trial_ends_after_audio: true,
        //timeline[
       //     {stimulus:}
       // ]
    };

  //control trial
    var response_trial = {
     type: jsPsychSurveyText,
     questions: [
        {prompt: 'Please type one word describing the emotion you believe was being expressed by the sound you just heard.'}
     ]
    };
    timeline.push(audio_trial);
    timeline.push(response_trial);

    jsPsych.run(timeline)
  </script>
</html>



